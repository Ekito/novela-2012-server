
@css = {
}

@javascript = {

	<script src="@routes.Assets.at("javascripts/data.js")" type="text/javascript"></script>

	<script src="http://openlayers.org/api/OpenLayers.js" type="text/javascript"></script>
	
	<script src="@routes.Assets.at("javascripts/constant.js")" type="text/javascript"></script>
	<script src="@routes.Assets.at("javascripts/sketchy.js")" type="text/javascript"></script>
	<script src="@routes.Assets.at("javascripts/sketchytrack.js")" type="text/javascript"></script>

	<script src="@routes.Assets.at("javascripts/map.js")" type="text/javascript"></script>
	<script src="@routes.Assets.at("javascripts/kaazing/StompJms.js")" type="text/javascript"></script>
	<script src="@routes.Assets.at("javascripts/kaazing/kaazing.js")" type="text/javascript"></script>
	
	<script type="text/javascript">
	$(document).ready(function() {
			$.map.init(stubs)
			
			function onMessage(message) {
		    	
		    	var location = JSON.parse(message.getText());
		    	
		      	console.log(location)
		      	
		      	$.map.setCenter({"lat":location.lat,"lon":location.lon})
		    }
		
			setupKaazing("ws://ec2-46-137-8-173.eu-west-1.compute.amazonaws.com:8001/jms", onMessage);
			
		}
	);
	</script>
}


@main(Messages("title"))(javascript)(css) {

	<div  id="map" data-bg="@routes.Assets.at("images/white.png")">
<!-- 
		<a href="#" onclick="$.map.showAllTracks();">center map</a>
		<a href="#" onclick="$.map.addTrack(1,stubs[1],{redraw:true,center:true});">add track</a>
		<a href="#" onclick="$.map.addPointsToTrack(0,stubs[3],{redraw:true,center:true});">add points to track</a> -->

	</div>
}